(function(t){function webpackJsonpCallback(e){for(var a,c,i=e[0],s=e[1],u=e[2],l=0,d=[];l<i.length;l++)c=i[l],Object.prototype.hasOwnProperty.call(n,c)&&n[c]&&d.push(n[c][0]),n[c]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(t[a]=s[a]);o&&o(e);while(d.length)d.shift()();return r.push.apply(r,u||[]),checkDeferredModules()}function checkDeferredModules(){for(var t,e=0;e<r.length;e++){for(var a=r[e],c=!0,i=1;i<a.length;i++){var o=a[i];0!==n[o]&&(c=!1)}c&&(r.splice(e--,1),t=__webpack_require__(__webpack_require__.s=a[0]))}return t}var e={},n={main:0},r=[];function __webpack_require__(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,__webpack_require__),r.l=!0,r.exports}__webpack_require__.m=t,__webpack_require__.c=e,__webpack_require__.d=function(t,e,n){__webpack_require__.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},__webpack_require__.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},__webpack_require__.t=function(t,e){if(1&e&&(t=__webpack_require__(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(__webpack_require__.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)__webpack_require__.d(n,r,function(e){return t[e]}.bind(null,r));return n},__webpack_require__.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return __webpack_require__.d(e,"a",e),e},__webpack_require__.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},__webpack_require__.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=webpackJsonpCallback,a=a.slice();for(var i=0;i<a.length;i++)webpackJsonpCallback(a[i]);var o=c;r.push(["56d7","chunk-vendors"]),checkDeferredModules()})({"00a9":function(t,e,n){"use strict";n("592c")},"0699":function(t,e,n){"use strict";n("3fff")},"0f17":function(t,e,n){"use strict";n("7ba8")},"113d":function(t,e,n){"use strict";n("c0cc")},1425:function(t,e,n){},1987:function(t,e,n){"use strict";n("f1b9")},"1ab0":function(t,e,n){},"212b":function(t,e,n){"use strict";n("4262")},2489:function(t,e,n){"use strict";n("5f23")},"2c81":function(t,e,n){"use strict";n("1425")},3968:function(t,e,n){"use strict";n("8eab")},"3fff":function(t,e,n){},4262:function(t,e,n){},"45e8":function(t,e,n){"use strict";n("5ae0")},"4f83":function(t,e,n){"use strict";n("e7f7")},"56d7":function(t,e,n){"use strict";n.r(e);var r={};n.r(r),n.d(r,"characters",(function(){return Ue})),n.d(r,"items",(function(){return Ze})),n.d(r,"map",(function(){return Xe})),n.d(r,"monsters",(function(){return vn})),n.d(r,"npcs",(function(){return yn})),n.d(r,"party",(function(){return xn})),n.d(r,"encounter",(function(){return Pn}));n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("7a23");function render(t,e,n,r,c,i){var o=Object(a["C"])("LoadingAnimation"),s=Object(a["C"])("router-view"),u=Object(a["C"])("admin-nav"),l=Object(a["C"])("Game");return t.loading?(Object(a["u"])(),Object(a["d"])(o,{key:0})):t.isDevEnv?(Object(a["u"])(),Object(a["f"])(a["a"],{key:1},[Object(a["j"])(s),Object(a["j"])(u)],64)):(Object(a["u"])(),Object(a["d"])(l,{key:2}))}var c=n("5502"),Gamevue_type_template_id_431d64de_scoped_true_withScopeId=function(t){return Object(a["x"])("data-v-431d64de"),t=t(),Object(a["v"])(),t},i={class:"game-layout d-flex"},o={class:"d-flex flex-column w-30"},s=Gamevue_type_template_id_431d64de_scoped_true_withScopeId((function(){return Object(a["g"])("div",{class:"h-60"},[Object(a["g"])("h3",null,"TODO -- character Sheet")],-1)})),u={class:"h-40"},l={class:"d-flex flex-column align-items-center w-40"},d={id:"map"},f={class:"d-flex flex-column w-30"},h={class:"flex-2"},b={class:"h-20 flex-1"},p={class:"flex-2"};function Gamevue_type_template_id_431d64de_scoped_true_render(t,e,n,r,c,j){var O=Object(a["C"])("GameLog"),v=Object(a["C"])("Map"),m=Object(a["C"])("Controls"),y=Object(a["C"])("MonsterParty"),_=Object(a["C"])("EncounterFeed"),g=Object(a["C"])("EncounterLoop"),x=Object(a["C"])("Party");return Object(a["u"])(),Object(a["f"])("div",i,[Object(a["g"])("div",o,[s,Object(a["g"])("div",u,[Object(a["j"])(O)])]),Object(a["g"])("div",l,[Object(a["g"])("div",d,[Object(a["j"])(v)]),Object(a["j"])(m)]),Object(a["g"])("div",f,[Object(a["g"])("div",h,[Object(a["j"])(y)]),Object(a["g"])("div",b,[Object(a["j"])(_)]),Object(a["j"])(g),Object(a["g"])("div",p,[Object(a["j"])(x)])])])}n("b0c0"),n("e9c4");var Charactervue_type_template_id_17e8e2bc_scoped_true_withScopeId=function(t){return Object(a["x"])("data-v-17e8e2bc"),t=t(),Object(a["v"])(),t},j={class:"character-view"},O={class:"d-flex align-items-center"},v=Charactervue_type_template_id_17e8e2bc_scoped_true_withScopeId((function(){return Object(a["g"])("div",{class:"picture"},"picture",-1)}));function Charactervue_type_template_id_17e8e2bc_scoped_true_render(t,e,n,r,c,i){return Object(a["u"])(),Object(a["f"])("div",j,[Object(a["g"])("div",O,[v,Object(a["g"])("h1",null,Object(a["F"])(t.selectedCharacter.name),1)]),Object(a["g"])("pre",null,Object(a["F"])(JSON.stringify(t.selectedCharacter,void 0,2))+"\r\n    ",1)])}var m={computed:Object(c["b"])("party",["selectedCharacter"])},y=(n("4f83"),n("6b0d")),_=n.n(y);const g=_()(m,[["render",Charactervue_type_template_id_17e8e2bc_scoped_true_render],["__scopeId","data-v-17e8e2bc"]]);var x=g,w={class:"PartyLayout"},k=["src"];function Partyvue_type_template_id_29a6e690_scoped_true_render(t,e,n,r,c,i){var o=Object(a["C"])("HealthBar");return Object(a["u"])(),Object(a["f"])("div",w,[(Object(a["u"])(!0),Object(a["f"])(a["a"],null,Object(a["A"])(t.party,(function(t){return Object(a["u"])(),Object(a["f"])("div",{key:t.name},[Object(a["g"])("img",{src:"/assets/".concat(t.image,".svg")},null,8,k),Object(a["g"])("td",null,Object(a["F"])(t.name),1),Object(a["j"])(o,{current:t.currentHp,max:t.maxHp},null,8,["current","max"])])})),128))])}var M={class:"HealthBar"};function HealthBarvue_type_template_id_4758125f_scoped_true_render(t,e,n,r,c,i){return Object(a["u"])(),Object(a["f"])("div",M,[Object(a["g"])("div",{class:"RemainingHp",style:Object(a["q"])(i.remainingStyle)},null,4)])}n("a9e3");var C={props:{max:{type:Number,required:!0},current:{type:Number,required:!0}},computed:{remainingStyle:function(){return{width:this.current/this.max*100+"%"}}}};n("1987");const L=_()(C,[["render",HealthBarvue_type_template_id_4758125f_scoped_true_render],["__scopeId","data-v-4758125f"]]);var S=L,D={components:{HealthBar:S},computed:Object(c["c"])("party",["party"])};n("45e8");const E=_()(D,[["render",Partyvue_type_template_id_29a6e690_scoped_true_render],["__scopeId","data-v-29a6e690"]]);var P=E,Mapvue_type_template_id_3b0d6f27_scoped_true_withScopeId=function(t){return Object(a["x"])("data-v-3b0d6f27"),t=t(),Object(a["v"])(),t},A={id:"mapContainer"},I={id:"mapLiner"},B=Mapvue_type_template_id_3b0d6f27_scoped_true_withScopeId((function(){return Object(a["g"])("g",{id:"background"},[Object(a["g"])("rect",{width:"100%",height:"100%",fill:"#000"}),Object(a["g"])("rect",{width:"100%",height:"100%",fill:"url(#grid)"}),Object(a["g"])("rect",{widht:"100%",height:"100%",fill:"transparent",stroke:"#fff","stroke-width":"1.5px"})],-1)})),F=Mapvue_type_template_id_3b0d6f27_scoped_true_withScopeId((function(){return Object(a["g"])("rect",{width:"100%",height:"100%",stroke:"#fff","stroke-width":"1px",fill:"transparent"},null,-1)})),G=["x","y"],T=["transform"],N=Mapvue_type_template_id_3b0d6f27_scoped_true_withScopeId((function(){return Object(a["g"])("rect",{x:"5px",y:"7px",width:"5px",height:"6px",fill:"#aaf"},null,-1)})),R=Mapvue_type_template_id_3b0d6f27_scoped_true_withScopeId((function(){return Object(a["g"])("polygon",{points:"2,7 13,7 7.5,2",fill:"#aaf"},null,-1)})),K=[N,R];function Mapvue_type_template_id_3b0d6f27_scoped_true_render(t,e,n,r,c,i){var o=Object(a["C"])("WallDefs"),s=Object(a["C"])("TileDefs");return Object(a["u"])(),Object(a["f"])("div",A,[Object(a["g"])("div",I,[(Object(a["u"])(),Object(a["f"])("svg",{id:"map",width:"600px",height:"600px",viewBox:"0 0 600 600",style:Object(a["q"])(i.positionMapTransform)},[Object(a["g"])("defs",null,[Object(a["j"])(o),Object(a["j"])(s)]),B,(Object(a["u"])(!0),Object(a["f"])(a["a"],null,Object(a["A"])(t.visibleLayers,(function(t){return Object(a["u"])(),Object(a["d"])(Object(a["D"])(i.layer(t).RenderComponent),{key:"layer-".concat(t),id:t,tools:i.layer(t).tools},null,8,["id","tools"])})),128)),F,(Object(a["u"])(),Object(a["f"])("svg",{x:15*t.location.x,y:15*t.location.y,viewBox:"0 0 15 15",width:"15px",height:"15px"},[Object(a["g"])("g",{transform:i.rotatePartyIndicatorTransform},K,8,T)],8,G))],4))])])}var q=n("5530"),H=(n("99af"),["id"]),z=["x","y","fill"];function Rendervue_type_template_id_ba53fc20_render(t,e,n,r,c,i){return Object(a["u"])(),Object(a["f"])("g",{id:n.id},[(Object(a["u"])(!0),Object(a["f"])(a["a"],null,Object(a["A"])(t.currentFloor.roomCoords,(function(e,n){return Object(a["u"])(),Object(a["f"])("g",{key:n},[(Object(a["u"])(!0),Object(a["f"])(a["a"],null,Object(a["A"])(e,(function(e,r){return Object(a["u"])(),Object(a["f"])(a["a"],{key:"".concat(n,",").concat(r)},[e?(Object(a["u"])(),Object(a["f"])("rect",{key:0,width:"15px",height:"15px",x:15*r,y:15*n,fill:t.roomIDColors[e]},null,8,z)):Object(a["e"])("",!0)],64)})),128))])})),128))],8,H)}var $=n("ade3"),U=n("2909"),J=n("3835"),Z=(n("d3b7"),n("ddb0"),n("c228")),W=n.n(Z),Y=n("4d8c"),Q=n.n(Y),V=n("c6b7"),X=n.n(V),tt=n("91c8"),et=n.n(tt),nt=800,rt={hue:30,sat:24,lit:24},at={hue:[0,360],sat:[40,100],lit:[25,75]},ct=0;function RoomIDColors_prctBtw(t,e){return"hue"==e?t/nt:t%rt[e]/rt[e]}function interpolate(t,e){var n=Object(J["a"])(at[t],2),r=n[0],a=n[1];return r+(a-r)*e}function color(t){var e=interpolate("hue",RoomIDColors_prctBtw(t,"hue")),n=interpolate("sat",RoomIDColors_prctBtw(t,"sat")),r=interpolate("lit",RoomIDColors_prctBtw(t+ct,"lit"));return"hsl(".concat(e,", ").concat(n,"%, ").concat(r,"%)")}var it=Object(U["a"])(Array(nt).keys()),ot=W()(Q()(X.a.apply(void 0,Object(U["a"])(et()(it,rt.hue))))),st=ot.reduce((function(t,e,n){return Object(q["a"])(Object(q["a"])({},t),{},Object($["a"])({},n,color(e)))}),{}),ut=st,lt={props:["id","tools"],data:function(){return{roomIDColors:ut}},computed:Object(q["a"])({},Object(c["c"])("map",["currentFloor"]))};const dt=_()(lt,[["render",Rendervue_type_template_id_ba53fc20_render]]);var ft=dt,ht=["eraser","add","edit","select"],bt={id:"rooms",tools:ht,RenderComponent:ft},pt=["id"],jt=Object(a["g"])("rect",{x:"0",y:"0",width:"600",height:"600",stroke:"#fff",fill:"transparent"},null,-1),Ot={key:0},vt=["x","y","xlink:href","transform"],mt=["x","y","xlink:href"];function Rendervue_type_template_id_e0c0cd86_render(t,e,n,r,c,i){return Object(a["u"])(),Object(a["f"])("g",{id:n.id},[jt,(Object(a["u"])(!0),Object(a["f"])(a["a"],null,Object(a["A"])(t.currentFloor.walls,(function(t,e){return Object(a["u"])(),Object(a["f"])("g",{key:e},[(Object(a["u"])(!0),Object(a["f"])(a["a"],null,Object(a["A"])(t,(function(t,r){return Object(a["u"])(),Object(a["f"])(a["a"],{key:r},[t&&(t[0]||t[1])?(Object(a["u"])(),Object(a["f"])("g",Ot,[t[0]?(Object(a["u"])(),Object(a["f"])("use",{key:0,width:"15px",height:"15px",x:15*r,y:15*e,"xlink:href":"#".concat(n.tools[t[0]]),transform:"rotate(-90 ".concat(15*r+8," ").concat(15*e+8,") translate(8)")},null,8,vt)):Object(a["e"])("",!0),t[1]?(Object(a["u"])(),Object(a["f"])("use",{key:1,width:"15px",height:"15px",x:15*r,y:15*e,"xlink:href":"#".concat(n.tools[t[1]]),transform:"translate(-7)"},null,8,mt)):Object(a["e"])("",!0)])):Object(a["e"])("",!0)],64)})),128))])})),128))],8,pt)}var yt={props:["id","tools"],data:function(){return{tiles:{1:"wall",2:"door",3:"hiddenDoor"}}},computed:Object(q["a"])({},Object(c["c"])("map",["currentFloor"]))};const _t=_()(yt,[["render",Rendervue_type_template_id_e0c0cd86_render]]);var gt=_t,xt=["eraser","wall","door","hiddenDoor"],wt={id:"walls",tools:xt,RenderComponent:gt},kt=["id"],Mt=["x","y","xlink:href"];function Rendervue_type_template_id_41cf3851_render(t,e,n,r,c,i){return Object(a["u"])(),Object(a["f"])("g",{id:n.id},[(Object(a["u"])(!0),Object(a["f"])(a["a"],null,Object(a["A"])(t.currentFloor[n.id],(function(t,e){return Object(a["u"])(),Object(a["f"])("g",{key:e},[(Object(a["u"])(!0),Object(a["f"])(a["a"],null,Object(a["A"])(t,(function(t,r){return Object(a["u"])(),Object(a["f"])(a["a"],{key:"".concat(e,",").concat(r)},[t?(Object(a["u"])(),Object(a["f"])("use",{key:0,width:"15px",height:"15px",x:15*r,y:15*e,"xlink:href":"#".concat(n.tools[t])},null,8,Mt)):Object(a["e"])("",!0)],64)})),128))])})),128))],8,kt)}var Ct={props:["id","tools"],computed:Object(q["a"])({},Object(c["c"])("map",["currentFloor"]))};const Lt=_()(Ct,[["render",Rendervue_type_template_id_41cf3851_render]]);var St=Lt,Dt={id:"effects",tools:["eraser","fog","puddle","light0","light1","light2","light3","light4","light5"],RenderComponent:St},Et={id:"floors",tools:["eraser","stairsUp","stairsDown","noFloor","pitTrap"],RenderComponent:St},Pt={walls:wt,rooms:bt,effects:Dt,floors:Et},At=Object(a["g"])("symbol",{id:"wall",viewBox:"0 0 15 15"},[Object(a["g"])("rect",{width:"1px",height:"15px",fill:"#fff",x:"7"})],-1),It=Object(a["g"])("symbol",{id:"door",viewBox:"0 0 15 15"},[Object(a["g"])("rect",{width:"1px",height:"6px",fill:"#fff",x:"7"}),Object(a["g"])("rect",{width:"1px",height:"6px",fill:"#fff",x:"7",y:"9"}),Object(a["g"])("rect",{width:"5px",height:"1px",fill:"#fff",x:"5",y:"5"}),Object(a["g"])("rect",{width:"5px",height:"1px",fill:"#fff",x:"5",y:"9"})],-1),Bt=Object(a["g"])("symbol",{id:"hiddenDoor",viewBox:"0 0 15 15"},[Object(a["g"])("rect",{width:"1px",height:"15px",fill:"#fff",x:"7"}),Object(a["g"])("rect",{width:"3px",height:"5px",fill:"#fff",x:"6",y:"5"})],-1);function Defsvue_type_template_id_cd977df6_render(t,e){return Object(a["u"])(),Object(a["f"])(a["a"],null,[At,It,Bt],64)}const Ft={},Gt=_()(Ft,[["render",Defsvue_type_template_id_cd977df6_render]]);var Tt=Gt,Nt=Object(a["g"])("symbol",{id:"stairsUp",viewBox:"0 0 15 15"},[Object(a["g"])("text",{y:"15",x:"0",fill:"#F00"},"S"),Object(a["g"])("path",{d:"M 12 14 L 12 5",fill:"none",stroke:"#F00","stroke-width":"1"}),Object(a["g"])("path",{d:"M 9 5 L 15 5 12 1 Z",fill:"#F00"})],-1),Rt=Object(a["g"])("symbol",{id:"stairsDown",viewBox:"0 0 15 15"},[Object(a["g"])("text",{y:"15",x:"0",fill:"#F00"},"S"),Object(a["g"])("path",{d:"M 12 10 L 12 1",fill:"none",stroke:"#F00","stroke-width":"1"}),Object(a["g"])("path",{d:"M 9 10 L 15 10 12 14 Z",fill:"#F00"})],-1),Kt=Object(a["g"])("symbol",{id:"noFloor",viewBox:"0 0 15 15"},[Object(a["g"])("text",{y:"15",x:"0",fill:"#F00"},"N")],-1),qt=Object(a["g"])("symbol",{id:"pitTrap",viewBox:"0 0 15 15"},[Object(a["g"])("rect",{x:"1.5",y:"1.5",width:"13px",height:"13px",stroke:"#fff",fill:"transparent"}),Object(a["g"])("rect",{x:"7",y:"-2px",width:"1px",height:"19px",fill:"#fff",transform:"rotate(45, 7.5, 7.52)"}),Object(a["g"])("rect",{x:"7",y:"-2px",width:"1px",height:"19px",fill:"#fff",transform:"rotate(-45, 7.5, 7.52)"})],-1),Ht=Object(a["g"])("symbol",{id:"fog",viewBox:"0 0 15 15"},[Object(a["g"])("rect",{width:"15px",height:"15px",fill:"#aaa"})],-1),zt=Object(a["g"])("symbol",{id:"puddle",viewBox:"0 0 15 15"},[Object(a["g"])("rect",{width:"15px",height:"15px",fill:"#88f"})],-1),$t=Object(a["g"])("symbol",{id:"light0",viewBox:"0 0 15 15"},[Object(a["g"])("rect",{width:"3px",height:"3px",fill:"#555"})],-1),Ut=Object(a["g"])("symbol",{id:"light1",viewBox:"0 0 15 15"},[Object(a["g"])("rect",{width:"3px",height:"3px",fill:"#777"})],-1),Jt=Object(a["g"])("symbol",{id:"light2",viewBox:"0 0 15 15"},[Object(a["g"])("rect",{width:"3px",height:"3px",fill:"#999"})],-1),Zt=Object(a["g"])("symbol",{id:"light3",viewBox:"0 0 15 15"},[Object(a["g"])("rect",{width:"3px",height:"3px",fill:"#aaa"})],-1),Wt=Object(a["g"])("symbol",{id:"light4",viewBox:"0 0 15 15"},[Object(a["g"])("rect",{width:"3px",height:"3px",fill:"#ccc"})],-1),Yt=Object(a["g"])("symbol",{id:"light5",viewBox:"0 0 15 15"},[Object(a["g"])("rect",{width:"3px",height:"3px",fill:"#eee"})],-1);function Defsvue_type_template_id_67c46f90_render(t,e){return Object(a["u"])(),Object(a["f"])(a["a"],null,[Nt,Rt,Kt,qt,Ht,zt,$t,Ut,Jt,Zt,Wt,Yt],64)}const Qt={},Vt=_()(Qt,[["render",Defsvue_type_template_id_67c46f90_render]]);var Xt=Vt,te=["walls","floors"],ee={components:{WallDefs:Tt,TileDefs:Xt},data:function(){return{visibleLayers:te}},computed:Object(q["a"])(Object(q["a"])(Object(q["a"])({},Object(c["c"])("map",["width","height"])),Object(c["c"])("party",["location","facing"])),{},{positionMapTransform:function(){var t=-15*(this.location.x-20)-7,e=-15*(this.location.y-20)-7;return{transform:"translate(".concat(t,"px, ").concat(e,"px)")}},rotatePartyIndicatorTransform:function(){return"rotate(".concat(90*this.facing," 7.5 7.5)")}}),methods:{layer:function(t){return Pt[t]}}};n("00a9");const ne=_()(ee,[["render",Mapvue_type_template_id_3b0d6f27_scoped_true_render],["__scopeId","data-v-3b0d6f27"]]);var re=ne,ae={class:"encounter"},ce={class:"liner"},ie=["src"];function MonsterPartyvue_type_template_id_9cd1eefa_render(t,e,n,r,c,i){var o=Object(a["C"])("HealthBar");return Object(a["u"])(),Object(a["f"])("div",ae,[(Object(a["u"])(!0),Object(a["f"])(a["a"],null,Object(a["A"])(i.monsterParty,(function(t,e){return Object(a["u"])(),Object(a["f"])("div",{class:"monsterGroup",key:"monster-".concat(e)},[Object(a["g"])("div",ce,[(Object(a["u"])(!0),Object(a["f"])(a["a"],null,Object(a["A"])(t.alive,(function(n){return Object(a["u"])(),Object(a["f"])("img",{key:"monster-".concat(e,"-").concat(n),src:"/assets/".concat(t.name,".svg")},null,8,ie)})),128))]),Object(a["j"])(o,{current:t.hp,max:t.stats.hp},null,8,["current","max"])])})),128))])}var oe=n("9b02"),se=n.n(oe),ue=n("761a"),le=n.n(ue),de={components:{HealthBar:S},computed:Object(q["a"])(Object(q["a"])({},Object(c["c"])("encounter",["currentEncounter"])),{},{monsterParty:function(){return se()(this.currentEncounter,"monsters.party",[])}}),methods:{pluralize:le.a}};n("b3d4");const fe=_()(de,[["render",MonsterPartyvue_type_template_id_9cd1eefa_render]]);var he=fe;function EncounterFeedvue_type_template_id_ca2f57e4_render(t,e,n,r,c,i){var o=Object(a["C"])("Log");return Object(a["u"])(),Object(a["d"])(o,{items:t.log},null,8,["items"])}var be={class:"log"};function Logvue_type_template_id_96ca7492_scoped_true_render(t,e,n,r,c,i){return Object(a["u"])(),Object(a["f"])("div",be,[(Object(a["u"])(!0),Object(a["f"])(a["a"],null,Object(a["A"])(n.items,(function(t,e){return Object(a["u"])(),Object(a["f"])("div",{key:e},Object(a["F"])(t),1)})),128))])}var pe={props:["items"]};n("212b");const je=_()(pe,[["render",Logvue_type_template_id_96ca7492_scoped_true_render],["__scopeId","data-v-96ca7492"]]);var Oe=je,ve={components:{Log:Oe},computed:Object(c["c"])("encounter",["log"])};const me=_()(ve,[["render",EncounterFeedvue_type_template_id_ca2f57e4_render]]);var ye=me,_e={class:"EncounterLoop"},ge={class:"actions"},xe=["src"];function EncounterLoopvue_type_template_id_7d50cb12_scoped_true_render(t,e,n,r,c,i){var o=Object(a["C"])("Action");return Object(a["u"])(),Object(a["f"])("div",_e,[Object(a["g"])("div",{id:"progress",ref:"progress",onAnimationend:e[0]||(e[0]=function(){return i.logReset&&i.logReset.apply(i,arguments)})},null,544),Object(a["g"])("div",ge,[(Object(a["u"])(!0),Object(a["f"])(a["a"],null,Object(a["A"])(t.actions,(function(t,e){var n=t.actor;return Object(a["u"])(),Object(a["f"])("div",{class:"action",key:"action-".concat(e)},[Object(a["g"])("img",{src:"/assets/".concat(n.image,".svg")},null,8,xe),Object(a["j"])(o,{action:n.currentAction},null,8,["action"])])})),128))])])}var we=n("c7eb"),ke=n("1da1");function delay(t){return new Promise((function(e){setTimeout(e,t)}))}var Me=n("257e"),Ce=n("45eb"),Le=n("7e84"),Se=n("262e"),De=n("2caf"),Ee=n("d4ec"),Pe=n("bee2"),Ae=(n("159b"),n("53ca")),Ie=n("bc3a"),Be=n.n(Ie);function getLSD(t){var e=localStorage.getItem(t);if(e)return JSON.parse(e)}function setLSD(t,e){e&&localStorage.setItem(t,JSON.stringify(e))}n("ac1f"),n("466d"),n("7db0"),n("c740"),n("a434"),n("d81d");var Fe=function(){function EventBus(){Object(Ee["a"])(this,EventBus),Object($["a"])(this,"eventListeners",{})}return Object(Pe["a"])(EventBus,[{key:"on",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.eventListeners[t]||(this.eventListeners[t]=[]);var a=this.eventListeners[t].find((function(t){var n=t.id;return e===n}));a&&this.off(t,e);var c={id:e,fn:n};if(r){var i=this.eventListeners[t].findIndex((function(t){var e=t.id;return e===r}));if(i>=0)return void this.eventListeners[t].splice(i-1,0,c)}this.eventListeners[t].push(c)}},{key:"off",value:function(t,e){if(this.eventListeners[t]){var n=this.eventListeners[t],r=n.findIndex((function(t){var n=t.id;return n===e}));n.splice(r,1)}}},{key:"emit",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.eventListeners[t];return n?n.map((function(t){var n=t.fn;return n(e)})):[]}}]),EventBus}(),Ge=function(t){Object(Se["a"])(Game,t);var e=Object(De["a"])(Game);function Game(){var t;Object(Ee["a"])(this,Game);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r)),Object($["a"])(Object(Me["a"])(t),"_moduleListeners",{}),Object($["a"])(Object(Me["a"])(t),"_moduleUnlisteners",{}),Object($["a"])(Object(Me["a"])(t),"_moduleKeys",[]),t}return Object(Pe["a"])(Game,[{key:"addListener",value:function(t,e){this._moduleListeners[t]||(this._moduleListeners[t]=[]),this._moduleListeners[t].push(e)}},{key:"addModule",value:function(t){var e=this,n=t.moduleKey;this[n]=t;var r=this._moduleListeners[n];this._moduleUnlisteners[n]=[],r&&r.forEach((function(r){var a=r.className,c=r.eventName,i=r.fn,o="".concat(a,".").concat(i.name);e.on(c,o,i.bind(t)),e._moduleUnlisteners[n].push((function(){return e.off(c,o)}))}))}},{key:"removeModule",value:function(t){var e=t.moduleKey;this._moduleUnlisteners[e].forEach((function(t){return t()})),delete this._moduleUnlisteners[e],delete this[t.moduleKey]}},{key:"initialize",value:function(){this.emit("Game.loaded")}}]),Game}(Fe),Te=new Ge,Ne=Te;n("b64b"),n("1276");function objectReduce(t,e,n){return Object.keys(t).reduce((function(n,r){return e(n,t[r],r)}),n)}function object_get(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;if("string"===typeof e&&(e=e.split(".")),!Array.isArray(e))throw"object.js:get requires a string or array for <path>";var r=e.reduce((function(t,e){return t&&t[e]}),t);return void 0===r?n:r}var areFalse=function(t){return!1===t};function events_event(t,e,n){var r=n.value,a=t.constructor.name;n.value=function(){var t=Ne.emit("before:".concat(a,".").concat(e));if(!t.some(areFalse)){for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];r.apply(this,c),Ne.emit("after:".concat(a,".").concat(e))}}}function listen(t){return function(e,n,r){var a=e.constructor.name,c=a.toLowerCase(),i=r.value;"string"===typeof t&&Ne.addListener(c,{className:a,eventName:t,fn:i}),Array.isArray(t)&&t.forEach((function(t){Ne.addListener(c,{className:a,eventName:t,fn:i})}))}}var Re={data:function(){return{unbinds:[]}},methods:{$bind:function(t,e){var n=this.$options.name;if(!n)throw"You must define component name in ".concat(this.$options.__file);var r=e.name.match(/[^\s]+$/)[0],a="".concat(n,".").concat(r);Ne.on(t,a,e);var unbind=function(){return Ne.off(t,a)};return this.unbinds.push(unbind),unbind}},beforeDestroy:function(){this.unbinds.forEach((function(t){return t()}))}},Ke=function(){function Listener(){Object(Ee["a"])(this,Listener),Object($["a"])(this,"unbinds",[])}return Object(Pe["a"])(Listener,[{key:"bind",value:function(t,e){var n="".concat(this.constructor.name,".").concat(e.name);Ne.on(t,n,e.bind(this));var unbind=function(){return Ne.off(t,n)};return this.unbinds.push(unbind),unbind}},{key:"unbind",value:function(){this.unbinds.forEach((function(t){return t()}))}}]),Listener}(),qe=function(t){Object(Se["a"])(GameSingleton,t);var e=Object(De["a"])(GameSingleton);function GameSingleton(){var t;return Object(Ee["a"])(this,GameSingleton),t=e.call(this),t.moduleKey=t.constructor.name.toLowerCase(),Ne.addModule(Object(Me["a"])(t)),t}return Object(Pe["a"])(GameSingleton,[{key:"destroy",value:function(){Ne.removeModule(this)}},{key:"get",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return object_get.apply(void 0,[this].concat(e))}}]),GameSingleton}(Ke),He=function(t){Object(Se["a"])(GameModule,t);var e=Object(De["a"])(GameModule);function GameModule(){var t;Object(Ee["a"])(this,GameModule);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r)),Object($["a"])(Object(Me["a"])(t),"data",{}),t}return Object(Pe["a"])(GameModule,[{key:"loadData",value:function(){var t=Object(ke["a"])(Object(we["a"])().mark((function _callee(){var t,e,n,r,a=arguments;return Object(we["a"])().wrap((function(c){while(1)switch(c.prev=c.next){case 0:if(t=!(a.length>0&&void 0!==a[0])||a[0],e=getLSD(this.moduleKey),!t||!e){c.next=6;break}this.data=e,c.next=11;break;case 6:return c.next=8,Be.a.get("/data/".concat(this.moduleKey,".json"));case 8:n=c.sent,r=n.data,this.data=r;case 11:case"end":return c.stop()}}),_callee,this)})));function loadData(){return t.apply(this,arguments)}return loadData}()},{key:"update",value:function(t){"string"===typeof t?this.context.commit("setState",Object($["a"])({},t,this.data[t])):"object"===Object(Ae["a"])(t)?this.context.commit("setState",t):t||this.context.commit("setState",this.data)}},{key:"save",value:function(){setLSD(this.moduleKey,this.data)}},{key:"vuexActions",get:function(){var t=this;return{initialize:function(e){t.context=e,t.update()}}}}]),GameModule}(qe),ze=function(){function Character(t){Object(Ee["a"])(this,Character),Object.assign(this,t)}return Object(Pe["a"])(Character,[{key:"act",value:function(){console.info("".concat(this.name," acted!"))}},{key:"actions",get:function(){return[{actor:this,execute:this.act.bind(this)}]}}]),Character}(),$e=function(t){Object(Se["a"])(Characters,t);var e=Object(De["a"])(Characters);function Characters(){var t;Object(Ee["a"])(this,Characters);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r)),Object($["a"])(Object(Me["a"])(t),"all",{}),t}return Object(Pe["a"])(Characters,[{key:"charactersInCurrentRoom",value:function(){return[]}},{key:"loadData",value:function(){var t=Object(ke["a"])(Object(we["a"])().mark((function _callee(){var t=this;return Object(we["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(Ce["a"])(Object(Le["a"])(Characters.prototype),"loadData",this).call(this);case 2:this.data.characters.forEach((function(e){t.all[e.name]=new ze(e)}));case 3:case"end":return e.stop()}}),_callee,this)})));function loadData(){return t.apply(this,arguments)}return loadData}()},{key:"find",value:function(t){return this.all[t]}}]),Characters}(He),Ue=new $e,Je=function(t){Object(Se["a"])(Items,t);var e=Object(De["a"])(Items);function Items(){return Object(Ee["a"])(this,Items),e.apply(this,arguments)}return Object(Pe["a"])(Items)}(He),Ze=new Je,We=n("0f5c"),Ye=n.n(We),Qe="Map.explored",Ve=function(t){Object(Se["a"])(Map,t);var e=Object(De["a"])(Map);function Map(){var t;return Object(Ee["a"])(this,Map),t=e.call(this),Object($["a"])(Object(Me["a"])(t),"initialState",{currentFloorIndex:0,currentFloor:{},currentFloorExplored:[],width:40,height:40}),Object($["a"])(Object(Me["a"])(t),"width",40),Object($["a"])(Object(Me["a"])(t),"height",40),t.exploredData=getLSD(Qe)||[],t}return Object(Pe["a"])(Map,[{key:"update",value:function(){var t=xn.data.location.z;Object(Ce["a"])(Object(Le["a"])(Map.prototype),"update",this).call(this,{currentFloorIndex:t,currentFloor:this.data.floors[t],currentFloorExplored:this.exploredData[t]})}},{key:"setExplored",value:function(t,e,n){Ye()(this.exploredData,[t,e,n],!0);var r=xn.data.location.z;Object(Ce["a"])(Object(Le["a"])(Map.prototype),"update",this).call(this,{currentFloorExplored:this.exploredData[r]}),this.save()}},{key:"save",value:function(){Object(Ce["a"])(Object(Le["a"])(Map.prototype),"save",this).call(this),setLSD(Qe,this.exploredData)}},{key:"isOutOfBounds",value:function(t){var e=t.x,n=t.y,r=t.z;return r<0||n<0||e<0||(r>this.data.floors.length-1||(n>this.height-1||e>this.width-1))}}]),Map}(He),Xe=new Ve,tn=(n("a15b"),n("4de4"),n("a1d1")),en=n.n(tn),nn=n("b85c"),rn=(n("caad"),n("2532"),n("6340")),an=n.n(rn);function weightedRoll(t){var e,n=an()(t),r=Object(J["a"])(n,2),a=r[0],c=r[1],i=a.reduce((function(t,e){return t+e}),0),o=Math.random()*i,s=0,u=Object(nn["a"])(t);try{for(u.s();!(e=u.n()).done;){var l=Object(J["a"])(e.value,2),d=l[0],f=l[1];if(s+d>o)return f;s+=d}}catch(h){u.e(h)}finally{u.f()}return c[c.length-1]}var cn=function(){function FairRoll(t){Object(Ee["a"])(this,FairRoll),Object($["a"])(this,"id",""),Object($["a"])(this,"history",[]),Object($["a"])(this,"maxHistory",5),this.id="FairRoll.".concat(t),this.history=getLSD(this.id)||[]}return Object(Pe["a"])(FairRoll,[{key:"roll",value:function(t){var e=this;if(this.maxHistory=t.length/3,t.length<5)return weightedRoll(t);var n=t.filter((function(t){var n=Object(J["a"])(t,2),r=(n[0],n[1]);return!e.history.includes(r)})),r=weightedRoll(n);return this.updateHistory(r),r}},{key:"updateHistory",value:function(t){this.history.push(t),this.history.length>this.maxHistory&&this.history.splice(0,this.history.length-this.maxHistory),setLSD(this.id,this.history)}}]),FairRoll}();function statsRoll(t,e){var n=randomGausian();return objectReduce(t,(function(t,r,a){var c=r/2+r*n;return t[a]=Math.round(c*Math.max(1,e)),t}),{})}function rng_roll(t){return Math.ceil(t*Math.random())}function randomGausian(){return(Math.random()+Math.random()+Math.random())/3}function rollGausian(t){return Math.ceil(randomGausian()*t)}function rollArray(t){return t[Math.floor(Math.random()*t.length)]}var on,sn,un,ln,dn,fn,Monsters_shouldFight=function(){return Pn.get("current.hostility")>.2},hn=function(){function Monster(t){if(Object(Ee["a"])(this,Monster),this.baseMonster=vn.data.monsters.find((function(e){var n=e.name;return n===t})),!this.baseMonster)throw"monsters[name: ".concat(t,"] not found");this.image=this.baseMonster.name;var e=this.baseMonster,n=e.name,r=e.spells;this.name=n,this.spells=r}return Object(Pe["a"])(Monster,[{key:"initialize",value:function(t){var e=this.baseMonster,n=e.stats,r=e.maxSpawn,a=e.alignments;this.stats=statsRoll(n,t),this.hp=this.stats.hp,this.count=rollGausian(r),this.alive=this.count,this.loot=this.stats.loot*this.count,this.alignment=rollArray(a),this.currentAction=Monsters_shouldFight()?"fight":"none"}},{key:"load",value:function(t){this.stats=t.stats,this.count=t.count,this.alive=t.alive,this.loot=t.loot,this.alignment=t.alignment,this.hp=t.hp,this.currentAction=t.currentAction}},{key:"act",value:function(){console.info("".concat(this.baseMonster.name," acted!"))}},{key:"actions",get:function(){return[{actor:this,execute:this.act.bind(this)}]}}]),Monster}(),bn=function(){function BaseMonsterParty(){Object(Ee["a"])(this,BaseMonsterParty)}return Object(Pe["a"])(BaseMonsterParty,[{key:"areDead",get:function(){return!this.party.some((function(t){var e=t.alive;return e}))}},{key:"behaviorSummary",value:function(){var t=Pn.get("current.hostility");return t>.2?"The monsters attack!":t>0?"The monsters glare at you...":t<-.8?"The monsters offer to join!":"The monsters look at you warily..."}},{key:"actions",get:function(){var t=Pn.get("current.hostility"),e=[];return t>.2&&this.aliveMonsters.forEach((function(t){e.push.apply(e,Object(U["a"])(t.actions))})),e}},{key:"statsSummary",get:function(){return this.party.reduce((function(t,e){var n=e.stats;return Object.keys(n).forEach((function(e){void 0===t[e]?t[e]=n[e]:t[e]+=n[e]})),t}),{})}},{key:"textSummary",get:function(){var t={},e=0;this.party.forEach((function(n){var r=n.name,a=n.count,c=n.alive,i=a-c;i&&(e+=i),c&&(t[r]||(t[r]=0),t[r]+=c)}));var n=objectReduce(t,(function(t,e){return t+e}),0),r=Object.keys(t).map((function(e){var n=t[e];return"".concat(n," ").concat(le()(e,n))})).join(", and ");e&&(r+="".concat(r?" and ":"").concat(e," dead monster").concat(e>1?"s":""));var a=n>1||e>1?"are":"is";return"There ".concat(a," ").concat(r," in the room.")}},{key:"aliveMonsters",get:function(){return this.party.filter((function(t){var e=t.alive;return e>0}))}}]),BaseMonsterParty}(),pn=function(t){Object(Se["a"])(MonsterParty,t);var e=Object(De["a"])(MonsterParty);function MonsterParty(t,n){var r;Object(Ee["a"])(this,MonsterParty),r=e.call(this);var a=vn.data.monsterParties[t];if(!a)throw"monsterParties[".concat(t,"] not found");return r.party=a.map((function(t){var e=new hn(t);return e.initialize(n),e})),r}return Object(Pe["a"])(MonsterParty,[{key:"initialize",value:function(){}}]),MonsterParty}(bn),jn=function(t){Object(Se["a"])(OldMonsterParty,t);var e=Object(De["a"])(OldMonsterParty);function OldMonsterParty(t){var n;return Object(Ee["a"])(this,OldMonsterParty),n=e.call(this),n.party=t.party.map((function(t){var e=new hn(t.name);return e.load(t),e})),n}return Object(Pe["a"])(OldMonsterParty,[{key:"initialize",value:function(){}}]),OldMonsterParty}(bn),On=function(t){Object(Se["a"])(Monsters,t);var e=Object(De["a"])(Monsters);function Monsters(){var t;Object(Ee["a"])(this,Monsters);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r)),Object($["a"])(Object(Me["a"])(t),"fairSpawn",new cn("monsters.fairSpawn")),t}return Object(Pe["a"])(Monsters,[{key:"spawn",value:function(t){var e=t.roomId,n=t.floor,r=Xe.data.floors[n].monsters,a=X()(en()(Array(r.length),1),r),c=se()(Xe.data.floors[n].rooms,[e,"monsterTable"],[]);return new pn(this.fairSpawn.roll([].concat(Object(U["a"])(a),Object(U["a"])(c))),n)}},{key:"respawn",value:function(t){return new jn(t)}}]),Monsters}(He),vn=new On,mn=function(t){Object(Se["a"])(Npcs,t);var e=Object(De["a"])(Npcs);function Npcs(){return Object(Ee["a"])(this,Npcs),e.apply(this,arguments)}return Object(Pe["a"])(Npcs)}(He),yn=new mn,_n=n("63ae"),gn=(n("e439"),on=function(t){Object(Se["a"])(Party,t);var e=Object(De["a"])(Party);function Party(){var t;Object(Ee["a"])(this,Party);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r)),Object($["a"])(Object(Me["a"])(t),"initialState",{characters:[],location:{x:0,y:0,z:0},facing:0,selectedCharacter:0,party:[]}),t}return Object(Pe["a"])(Party,[{key:"teleport",value:function(t){Xe.isOutOfBounds(t)||(this.data.location=Object(q["a"])({},t),this.update("location"))}},{key:"move",value:function(){var t=this.data.location,e=t.x,n=t.y,r=t.z,a=this.data.facing,c=1===a?1:0,i=2===a?1:0,o=a%2==0?0:1,s=["floors",r,"walls",n+i,e+c,o],u=se()(Xe.data,s);if(1!==u){var l=Object(q["a"])({},this.data.location);switch(a){case 0:l.y-=1;break;case 1:l.x+=1;break;case 2:l.y+=1;break;case 3:l.x-=1;break}Xe.isOutOfBounds(l)||(this.data.location=l,this.update("location"))}}},{key:"turn",value:function(t){var e=this.data.facing+t;this.data.facing=e<0?4+e:e>3?e%4:e,this.update("facing")}},{key:"update",value:function(t){Object(Ce["a"])(Object(Le["a"])(Party.prototype),"update",this).call(this,t),Object(Ce["a"])(Object(Le["a"])(Party.prototype),"update",this).call(this,{party:this.party}),this.save()}},{key:"party",get:function(){return this.data.characters.map((function(t){return Ue.find(t)}))}},{key:"statsSummary",get:function(){return this.party.reduce((function(t,e){var n=e.stats;return Object.keys(n).forEach((function(e){void 0===t[e]?t[e]=n[e]:t[e]+=n[e]})),t}),{})}},{key:"actions",get:function(){var t=[];return this.party.forEach((function(e){t.push.apply(t,Object(U["a"])(e.actions))})),t}}]),Party}(He),Object(_n["a"])(on.prototype,"move",[events_event],Object.getOwnPropertyDescriptor(on.prototype,"move"),on.prototype),on),xn=new gn,wn=n("99de"),kn=n("8c6f"),Mn=n("2cf3"),Cn=n("b166"),Ln={good:{good:-1,neutral:.5,evil:1},neutral:{good:.25,neutral:-.5,evil:.25},evil:{good:.5,neutral:0,evil:-.5}};function feelingsToward(t,e){var n=Ln[t.alignment][e.alignment],r=(e.stats.charisma||1)/(t.stats.intelligence||1)/10+1;return Math.max(-1,Math.min(1,Math.round(n*r*100)/100))}function partyFeelsTowardParty(t,e){var n,r=[],a=Object(nn["a"])(t);try{for(a.s();!(n=a.n()).done;){var c,i=n.value,o=Object(nn["a"])(e);try{for(o.s();!(c=o.n()).done;){var s=c.value;r.push(feelingsToward(i,s))}}catch(l){o.e(l)}finally{o.f()}}}catch(l){a.e(l)}finally{a.f()}var u=r.reduce((function(t,e){return t+e}))/r.length;return Math.round(100*u)/100}var Sn="yyyy-MM-dd:HH:mm:ss",Dn=(sn=function(t){Object(Se["a"])(ActiveEncounter,t);var e=Object(De["a"])(ActiveEncounter);function ActiveEncounter(t,n){var r;if(Object(Ee["a"])(this,ActiveEncounter),r=e.call(this),Object($["a"])(Object(Me["a"])(r),"log",[]),Object($["a"])(Object(Me["a"])(r),"respawn",15),r.floor=t,r.roomId=n,r.key="".concat(t,",").concat(n),!n)return Object(wn["a"])(r);var a=Pn.previous[r.key],c=new Date;if(a&&!a.cleared){var i=Object(kn["a"])(c,Object(Mn["a"])(a.spawned,Sn,c));i>r.respawn?r.spawn():r.reload(a)}else r.spawn();return r.start(),r}return Object(Pe["a"])(ActiveEncounter,[{key:"spawn",value:function(){var t=this.roomId,e=this.floor;this.monsters=vn.spawn({roomId:t,floor:e});var n=partyFeelsTowardParty(this.monsters.party,xn.party);this.hostility=randomGausian()*n,this.monsters.initialize(),this.log=[],this.spawned=Object(Cn["a"])(new Date,Sn),this.looted=!1,this.addLog=this.monsters.textSummary}},{key:"reload",value:function(t){var e=t.monsters,n=t.log,r=t.hostility,a=t.spawned;this.monsters=vn.respawn(e),this.hostility=r,this.log=n,this.spawned=a,this.addLog="You walk back in the room"}},{key:"start",value:function(){this.looted||this.lootSummary(),this.monsters.areDead||(this.addLog=this.monsters.behaviorSummary(this.hostility),this.bind("before:Party.move",this.monstersAreBlocking),this.bind("before:Encounter.tick",this.monsterFlavorText))}},{key:"end",value:function(){this.unbind()}},{key:"lootSummary",value:function(){this.looted||(this.monsters.totalLoot>5e3?this.addLog="There is a massive chest in the room!":this.monsters.totalLoot>2e3?this.addLog="There is a chest in the room!":this.monsters.totalLoot>1e3&&(this.addLog="There is a small chest in the room!"))}},{key:"monstersAreBlocking",value:function(){var t=this.monsters.statsSummary.strength,e=void 0===t?0:t,n=xn.statsSummary.strength,r=void 0===n?0:n;if(this.hostility>.2&&e>r)return this.addLog="The monsters block you!",!1}},{key:"monsterFlavorText",value:function(){if(!(rng_roll(8)>1)){var t=rollArray(this.monsters.party),e=t.baseMonster.flavorText||{},n="stares at you blankly.";this.hostility<-.8&&(n=e["-0.8"]),this.hostility<0&&(n=e["0"]),this.hostility<.2&&(n=e["0.2"]),this.hostility>=.2&&(n=e["1"]),this.addLog="A ".concat(t.name," ").concat(n)}}},{key:"addLog",set:function(t){this.log.push(t),Pn.update()}},{key:"toObj",get:function(){return Object(q["a"])(Object(q["a"])({},this),{},{monsters:{party:this.monsters.party.map((function(t){return Object(q["a"])({},t)}))}})}},{key:"actions",get:function(){return[].concat(Object(U["a"])(xn.actions),Object(U["a"])(this.monsters.actions))}}]),ActiveEncounter}(qe),Object(_n["a"])(sn.prototype,"start",[events_event],Object.getOwnPropertyDescriptor(sn.prototype,"start"),sn.prototype),Object(_n["a"])(sn.prototype,"end",[events_event],Object.getOwnPropertyDescriptor(sn.prototype,"end"),sn.prototype),sn),En=(un=listen(["Game.loaded","after:Party.move"]),ln=listen("after:ActiveEncounter.start"),dn=listen("after:ActiveEncounter.end"),fn=function(t){Object(Se["a"])(Encounter,t);var e=Object(De["a"])(Encounter);function Encounter(){var t;return Object(Ee["a"])(this,Encounter),t=e.call(this),Object($["a"])(Object(Me["a"])(t),"initialState",{turnSpeed:2e3,log:[],currentEncounter:{},actions:[]}),Object($["a"])(Object(Me["a"])(t),"current",null),Object($["a"])(Object(Me["a"])(t),"tickInterval",0),Object($["a"])(Object(Me["a"])(t),"actionIntervals",[]),Object($["a"])(Object(Me["a"])(t),"previousLSDKey","encounter.previous"),t.previous=getLSD(t.previousLSDKey)||{},t}return Object(Pe["a"])(Encounter,[{key:"checkRoom",value:function(){var t=xn.data.location,e=t.x,n=t.y,r=t.z,a=Xe.data.floors[r].roomCoords[n][e];this.current&&this.current.roomId!=a&&this.unloadCurrentEncounter(),!a||this.current&&this.current.roomId==a?this.update():this.loadEncounter(r,a),this.save()}},{key:"update",value:function(){this.current?Object(Ce["a"])(Object(Le["a"])(Encounter.prototype),"update",this).call(this,{currentEncounter:this.current.toObj,log:this.current.log}):Object(Ce["a"])(Object(Le["a"])(Encounter.prototype),"update",this).call(this,{currentEncounter:{},log:[]})}},{key:"save",value:function(){Object(Ce["a"])(Object(Le["a"])(Encounter.prototype),"save",this).call(this),setLSD(this.previousLSDKey,this.previous)}},{key:"loadEncounter",value:function(t,e){this.current=new Dn(t,e),this.update()}},{key:"unloadCurrentEncounter",value:function(){var t=this.current.toObj;this.current.end(),t.spawned&&(this.previous[t.key]=t),this.current=null,this.save()}},{key:"startTick",value:function(){setTimeout(this.tick.bind(this),5),this.tickInterval=setInterval(this.tick.bind(this),this.data.turnSpeed)}},{key:"stopTick",value:function(){clearInterval(this.tickInterval),this.tickInterval=0,this.actionIntervals.forEach(clearInterval),this.actionIntervals=[]}},{key:"setSpeed",value:function(t){this.stopTick(),this.data.turnSpeed=t,Object(Ce["a"])(Object(Le["a"])(Encounter.prototype),"update",this).call(this,{turnSpeed:t}),this.startTick()}},{key:"tick",value:function(){if(console.debug("tick"),this.current){var t=this.current.actions;Object(Ce["a"])(Object(Le["a"])(Encounter.prototype),"update",this).call(this,{actions:t});for(var e=Math.floor(this.data.turnSpeed/(t.length+1)),n=0;n<t.length;n++){var r=t[n].execute;this.actionIntervals.push(setTimeout(r,e*(n+1)))}}}}]),Encounter}(He),Object(_n["a"])(fn.prototype,"checkRoom",[un],Object.getOwnPropertyDescriptor(fn.prototype,"checkRoom"),fn.prototype),Object(_n["a"])(fn.prototype,"startTick",[ln],Object.getOwnPropertyDescriptor(fn.prototype,"startTick"),fn.prototype),Object(_n["a"])(fn.prototype,"stopTick",[dn],Object.getOwnPropertyDescriptor(fn.prototype,"stopTick"),fn.prototype),Object(_n["a"])(fn.prototype,"tick",[events_event],Object.getOwnPropertyDescriptor(fn.prototype,"tick"),fn.prototype),fn),Pn=new En,An={class:"Action"};function Actionvue_type_template_id_7f275397_scoped_true_render(t,e,n,r,c,i){return Object(a["u"])(),Object(a["f"])("span",An,[Object(a["i"])(Object(a["F"])(i.emoji)+" ",1),i.regGroups.detail?(Object(a["u"])(),Object(a["f"])(a["a"],{key:0},[Object(a["i"])(Object(a["F"])(i.regGroups.detail),1)],64)):Object(a["e"])("",!0)])}var In=n("9558"),Bn={props:{action:{type:String,required:!0}},computed:{regGroups:function(){return this.action.match(Object(In["a"])(/^([^\s]+)(:? '([^\s]+)')?/i,{base:1,detail:3})).groups},emoji:function(){switch(this.regGroups.base){case"fight":return"⚔️";case"defend":return"🛡️";case"cast":return"✨️";default:return"?"}}}};n("e3c1");const Fn=_()(Bn,[["render",Actionvue_type_template_id_7f275397_scoped_true_render],["__scopeId","data-v-7f275397"]]);var Gn=Fn,Tn={name:"EncounterLoop",components:{Action:Gn},computed:Object(q["a"])({},Object(c["c"])("encounter",["turnSpeed","actions"])),methods:{logReset:function(){console.debug("EncounterLoop.logReset - Encounter.tick logic is slow"),this.reset()},reset:function(){this.$refs.progress.classList.remove("running")},start:function(){var t=this;return Object(ke["a"])(Object(we["a"])().mark((function _callee(){var e;return Object(we["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e=t.$refs.progress,!e.classList.contains("running")){n.next=7;break}return t.reset(),n.next=5,t.$nextTick();case 5:return n.next=7,delay(10);case 7:e.style.animationDuration="".concat(t.turnSpeed,"ms"),e.classList.add("running");case 9:case"end":return n.stop()}}),_callee)})))()}},mounted:function(){Pn.tickInterval&&this.start(),this.$bind("before:Encounter.tick",this.start)}};n("2c81"),n("0f17");const Nn=_()(Tn,[["render",EncounterLoopvue_type_template_id_7d50cb12_scoped_true_render],["__scopeId","data-v-7d50cb12"]]);var Rn=Nn,Kn={class:"game-log"},qn=Object(a["g"])("h3",null,"TODO -- game log here",-1),Hn=[qn];function GameLogvue_type_template_id_8d677ae2_render(t,e){return Object(a["u"])(),Object(a["f"])("div",Kn,Hn)}const zn={},$n=_()(zn,[["render",GameLogvue_type_template_id_8d677ae2_render]]);var Un=$n,Jn={class:"d-flex flex-column"},Zn={class:"key-row"},Wn={class:"w-33"},Yn={class:"key-row"},Qn={class:"w-33"},Vn={class:"w-33"},Xn={class:"w-33"};function Controlsvue_type_template_id_2ace3cd2_scoped_true_render(t,e,n,r,c,i){var o=Object(a["C"])("i-fa"),s=Object(a["C"])("KeyButton");return Object(a["u"])(),Object(a["f"])("div",Jn,[Object(a["g"])("div",Zn,[Object(a["g"])("div",Wn,[Object(a["j"])(s,{shortcutKey:"up",onClick:i.moveForward},{default:Object(a["I"])((function(){return[Object(a["j"])(o,{icon:"arrow-up"})]})),_:1},8,["onClick"])])]),Object(a["g"])("div",Yn,[Object(a["g"])("div",Qn,[Object(a["j"])(s,{shortcutKey:"left",onClick:e[0]||(e[0]=function(t){return i.turn(-1)})},{default:Object(a["I"])((function(){return[Object(a["j"])(o,{icon:"arrow-left"})]})),_:1})]),Object(a["g"])("div",Vn,[Object(a["j"])(s,{shortcutKey:"down",onClick:e[1]||(e[1]=function(t){return i.turn(2)})},{default:Object(a["I"])((function(){return[Object(a["j"])(o,{icon:"arrow-down"})]})),_:1})]),Object(a["g"])("div",Xn,[Object(a["j"])(s,{shortcutKey:"right",onClick:e[2]||(e[2]=function(t){return i.turn(1)})},{default:Object(a["I"])((function(){return[Object(a["j"])(o,{icon:"arrow-right"})]})),_:1})])])])}var tr={methods:{moveForward:function(){xn.move()},turn:function(t){xn.turn(t)}}};n("79f9");const er=_()(tr,[["render",Controlsvue_type_template_id_2ace3cd2_scoped_true_render],["__scopeId","data-v-2ace3cd2"]]);var nr=er,rr={Character:x,Party:P,Map:re,MonsterParty:he,EncounterFeed:ye,EncounterLoop:Rn,GameLog:Un,Controls:nr},ar={components:rr};n("b30e");const cr=_()(ar,[["render",Gamevue_type_template_id_431d64de_scoped_true_render],["__scopeId","data-v-431d64de"]]);var ir=cr,or={id:"loading"},sr=Object(a["h"])('<svg viewBox="0 0 100 300"><defs><clipPath id="clipStairs" clipPathUnits="userSpaceOnUse"><rect x="0" y="175" width="100" height="125"></rect></clipPath><radialGradient id="halo"><stop offset="0%" stop-color="#cb8e5d"></stop><stop offset="80%" stop-color="#000"></stop></radialGradient></defs><circle class="halo" cx="70" cy="70" r="310" fill="url(#halo)"></circle><g class="flame"><g class="sparks"><circle class="spark_1" fill="white" cx="5" cy="20" r="1"></circle><circle class="spark_2" fill="white" cx="8" cy="15" r="1"></circle><circle class="spark_3" fill="white" cx="10" cy="15" r="1"></circle><circle class="spark_4" fill="white" cx="12" cy="15" r="1"></circle><circle class="spark_5" fill="white" cx="15" cy="20" r="1"></circle></g><path class="outerFlame" width="16" height="22" x="50" y="30" d="M 6.32,4.41\n             C 7.84,1.57 8.59,0.15 9.77,0.14\n             10.95,0.12 11.74,1.52 13.32,4.32\n             13.32,4.32 18.36,13.23 18.36,13.23\n             18.40,13.30 18.42,13.33 18.44,13.38\n             18.47,13.43 18.48,13.45 18.50,13.50\n             18.94,14.51 21.47,20.81 18.44,25.18\n             15.13,29.94 4.61,30.32 1.55,25.18\n             -1.28,20.43 1.13,14.35 1.50,13.47\n             1.52,13.44 1.53,13.42 1.54,13.38\n             1.56,13.34 1.58,13.31 1.61,13.26\n             1.61,13.26 6.32,4.41 6.32,4.41 Z"></path><path class="innerFlame" width="10" height="12" x="50" y="36" d="M 6.48,14.60\n             C 7.97,12.12 8.72,10.87 9.83,10.86\n             10.93,10.85 11.71,12.07 13.27,14.51\n             13.27,14.51 15.22,17.58 15.22,17.58\n             15.26,17.65 15.29,17.68 15.32,17.74\n             15.35,17.79 15.36,17.82 15.38,17.86\n             15.73,18.60 17.17,21.99 15.31,24.37\n             13.21,27.05 6.55,27.26 4.61,24.37\n             2.88,21.78 4.25,18.49 4.56,17.83\n             4.57,17.80 4.58,17.78 4.61,17.73\n             4.63,17.69 4.65,17.66 4.68,17.61\n             4.68,17.61 6.48,14.60 6.48,14.60 Z" fill="#333"></path></g><g clip-path="url(#clipStairs)" x="0" y="200" width="100" height="100"><g class="stairs"><rect fill="#000" height="26" width="25" x="0" y="200"></rect><rect fill="#000" height="26" width="50" x="0" y="225"></rect><rect fill="#000" height="26" width="75" x="0" y="250"></rect><rect fill="#000" height="26" width="100" x="0" y="275"></rect><rect fill="#000" height="26" width="125" x="0" y="300"></rect></g></g><g class="head-torso"><circle fill="black" cx="40" cy="120" r="15"><animate attributeName="cx" values="40;45;40" dur="2s" repeatCount="indefinite"></animate><animate attributeName="cy" values="120;125;120" dur="2s" repeatCount="indefinite"></animate></circle><line x1="40" y1="134" x2="35" y2="185"><animate attributeName="x1" values="40;45;40" dur="2s" repeatCount="indefinite"></animate><animate attributeName="y1" values="134;139;134" dur="2s" repeatCount="indefinite"></animate><animate attributeName="x2" values="35;45;35" dur="2s" repeatCount="indefinite"></animate><animate attributeName="y2" values="185;190;185" dur="2s" repeatCount="indefinite"></animate></line><g class="leg"><line x1="70" y1="175" x2="35" y2="185"><animate attributeName="x1" values="70;80;70" dur="2s" repeatCount="indefinite"></animate><animate attributeName="y1" values="175;205;175" dur="2s" repeatCount="indefinite"></animate><animate attributeName="x2" values="35;45;35" dur="2s" repeatCount="indefinite"></animate><animate attributeName="y2" values="185;190;185" dur="2s" repeatCount="indefinite"></animate></line><line x1="70" y1="175" x2="50" y2="225"><animate attributeName="x1" values="70;80;70" dur="2s" repeatCount="indefinite"></animate><animate attributeName="y1" values="175;205;175" dur="2s" repeatCount="indefinite"></animate><animate attributeName="x2" values="50;75;50" dur="2s" repeatCount="indefinite"></animate><animate attributeName="y2" values="225;250;225" dur="2s" repeatCount="indefinite"></animate></line></g><g class="leg"><line x1="65" y1="210" x2="35" y2="185"><animate attributeName="x1" values="65;80;65" dur="2s" repeatCount="indefinite"></animate><animate attributeName="y1" values="210;195;210" dur="2s" repeatCount="indefinite"></animate><animate attributeName="x2" values="35;45;35" dur="2s" repeatCount="indefinite"></animate><animate attributeName="y2" values="185;190;185" dur="2s" repeatCount="indefinite"></animate></line><line x1="65" y1="210" x2="75" y2="250"><animate attributeName="x1" values="65;80;65" dur="2s" repeatCount="indefinite"></animate><animate attributeName="y1" values="210;195;210" dur="2s" repeatCount="indefinite"></animate><animate attributeName="x2" values="75;50;75" dur="2s" repeatCount="indefinite"></animate><animate attributeName="y2" values="250;225;250" dur="2s" repeatCount="indefinite"></animate></line></g></g></svg><h1 class="ms-4">LOADING...</h1>',2),ur=[sr];function LoadingAnimationvue_type_template_id_6c4db074_render(t,e){return Object(a["u"])(),Object(a["f"])("div",or,ur)}n("0699");const lr={},dr=_()(lr,[["render",LoadingAnimationvue_type_template_id_6c4db074_render]]);var fr=dr,hr={computed:Object(c["c"])(["loading","isDevEnv"]),components:{LoadingAnimation:fr,Game:ir}};n("113d"),n("2489"),n("3968");const br=_()(hr,[["render",render]]);var pr=br,jr=(n("3ca3"),{namespaced:!0}),Or={setState:function(t,e){Object.keys(e).forEach((function(n){"object"===Object(Ae["a"])(e[n])?t[n]=Object(q["a"])({},e[n]):t[n]=e[n]}))}},vr=Object(q["a"])(Object(q["a"])({},jr),{},{mutations:Or,state:function(){return Xe.initialState},actions:Xe.vuexActions}),mr=Object(q["a"])(Object(q["a"])({},jr),{},{mutations:Or,state:function(){return xn.initialState},actions:xn.vuexActions,getters:{selectedCharacter:function(t){return t.characters[t.selectedCharacter||0]}}}),yr=Object(q["a"])(Object(q["a"])({},jr),{},{mutations:Or,state:function(){return Pn.initialState},actions:Pn.vuexActions}),_r={map:vr,party:mr,encounter:yr},gr=new c["a"].Store({state:function(){return{loading:!0,isDevEnv:!1}},mutations:{setLoading:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t.loading=e}},modules:_r}),xr=Object.keys(r).map((function(t){var e=r[t];return Ne.addModule(e),e.loadData()}));Promise.all(xr).then((function(){Object.keys(_r).forEach((function(t){gr.dispatch("".concat(t,"/initialize"))})),Ne.initialize(),gr.commit("setLoading")}));var wr=gr,kr=n("ecee"),Mr=n("c074");kr["c"].add(Mr["d"],Mr["b"],Mr["c"],Mr["a"]);var Cr=n("ad3d"),Lr=["data-on"];function KeyPressvue_type_template_id_ee607d64_render(t,e,n,r,c,i){return Object(a["u"])(),Object(a["f"])(a["a"],null,[Object(a["g"])("span",{onClick:e[0]||(e[0]=function(){return i.hit&&i.hit.apply(i,arguments)})},[Object(a["B"])(t.$slots,"default")]),Object(a["g"])("span",{class:Object(a["p"])(["keypress",{show:t.show}]),"data-on":n.on},null,10,Lr)],64)}var Sr=n("4fc7"),Dr=n.n(Sr),Er={props:{on:String},emits:["hit"],data:function(){return{show:!1}},methods:{toggle:function(){this.show=!this.show},hide:function(){this.show=!1},hit:function(t){this.$emit("hit",t)}},mounted:function(){Dr()(this.on,this.hit),Dr()("shift-/",this.toggle),Dr()("esc",this.hide)},beforeUnmount:function(){Dr.a.unbind(this.on,this.hit),Dr.a.unbind("shift-/",this.toggle),Dr.a.unbind("esc",this.hide)}};n("71c3");const Pr=_()(Er,[["render",KeyPressvue_type_template_id_ee607d64_render]]);var Ar=Pr,Ir=["title"];function KeyButtonvue_type_template_id_98f0d88c_render(t,e,n,r,c,i){var o=Object(a["C"])("KeyPress");return Object(a["u"])(),Object(a["d"])(o,{on:n.shortcutKey,onHit:e[0]||(e[0]=function(e){return t.$emit("click")})},{default:Object(a["I"])((function(){return[Object(a["g"])("button",{title:n.tooltip},[Object(a["B"])(t.$slots,"default")],8,Ir)]})),_:3},8,["on"])}var Br={props:["shortcutKey","tooltip"],emits:["click"]};const Fr=_()(Br,[["render",KeyButtonvue_type_template_id_98f0d88c_render]]);var Gr=Fr,Tr=n("6c02"),Nr=[{path:"/",name:"Game",component:ir}],Rr=Object(Tr["a"])({history:Object(Tr["b"])("/"),routes:Nr}),Kr=Rr,qr=Object(a["c"])(pr);qr.component("admin-nav",{template:"<span></span>"}),qr.component("i-fa",Cr["a"]),qr.component("KeyPress",Ar),qr.component("KeyButton",Gr),qr.mixin(Re),qr.use(wr),qr.use(Kr),qr.mount("#app"),window.app=qr},"592c":function(t,e,n){},"5ae0":function(t,e,n){},"5f23":function(t,e,n){},"71c3":function(t,e,n){"use strict";n("d441")},"79f9":function(t,e,n){"use strict";n("cde3")},"7ba8":function(t,e,n){},"8eab":function(t,e,n){},b30e:function(t,e,n){"use strict";n("c7ae")},b3d4:function(t,e,n){"use strict";n("c3d9")},c0cc:function(t,e,n){},c3d9:function(t,e,n){},c7ae:function(t,e,n){},cde3:function(t,e,n){},d441:function(t,e,n){},e3c1:function(t,e,n){"use strict";n("1ab0")},e7f7:function(t,e,n){},f1b9:function(t,e,n){}});
//# sourceMappingURL=main.008beea3.js.map